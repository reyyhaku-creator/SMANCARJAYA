<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kalkulator Patungan — Glassmorphism</title>
  <style>
    /* Glassmorphism theme + modern spacing */
    :root{
      --bg1:#f0f4ff; --bg2:#fff7fb;
      --card-bg: rgba(255,255,255,0.58);
      --card-border: rgba(255,255,255,0.6);
      --muted:#57606a;
      --accent:#6d28d9; /* purple */
      --accent-2:#ff7a45; /* warm orange */
      --glass: rgba(255,255,255,0.18);
      --glass-2: rgba(13,17,23,0.06);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{min-height:100vh;margin:0;padding:36px;background:linear-gradient(135deg,var(--bg1),var(--bg2));display:flex;align-items:center;justify-content:center}

    .container{width:100%;max-width:980px;display:grid;grid-template-columns:1fr 420px;gap:26px;align-items:start}

    header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
    .logo{display:flex;flex-direction:column}
    .title{font-size:22px;font-weight:800;color:#0f172a}
    .subtitle{color:var(--muted);font-size:13px;margin-top:6px}

    /* Glass card */
    .card{background:var(--card-bg);backdrop-filter:blur(12px) saturate(120%);border-radius:18px;padding:22px;border:1px solid var(--card-border);box-shadow:0 12px 30px rgba(18,24,40,0.08)}

    /* Left: super-calculator */
    .calc{display:flex;flex-direction:column;gap:14px}
    .display{height:84px;background:linear-gradient(180deg, rgba(16,24,40,0.96), rgba(11,17,28,0.98));color:#e6eef8;border-radius:14px;display:flex;align-items:center;justify-content:space-between;padding:16px 18px;font-size:30px;overflow:hidden}
    .display .expr{color:#b6c0cc;font-size:13px}
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}

    button.k{height:58px;border-radius:14px;border:0;font-size:18px;cursor:pointer;background:rgba(250,250,250,0.7);box-shadow:0 6px 12px rgba(13,17,23,0.04);transition:transform .12s ease, box-shadow .12s ease}
    button.k:active{transform:translateY(1px)}
    button.k:hover{box-shadow:0 10px 22px rgba(13,17,23,0.06)}

    button.op{background:linear-gradient(135deg,var(--accent-2),#ff9a6a);color:white;box-shadow:0 8px 20px rgba(255,122,69,0.12)}
    button.equal{grid-column:span 2;background:linear-gradient(135deg,var(--accent),#8b5cf6);color:white;box-shadow:0 8px 20px rgba(109,40,217,0.12)}
    .wide{grid-column:span 2}

    /* Right: Split bill */
    .split{display:flex;flex-direction:column;gap:12px}
    .field{display:flex;flex-direction:column;gap:8px}
    label{font-size:13px;color:var(--muted)}
    input[type=number],input[type=text],select{height:46px;padding:10px 12px;border-radius:12px;border:1px solid rgba(10,12,20,0.04);font-size:16px;background:rgba(255,255,255,0.6)}
    .row{display:flex;gap:12px}
    .row .col{flex:1}
    .result{background:linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.08)}
    .big{font-size:20px;font-weight:700;color:#0f172a}

    .controls{display:flex;gap:8px;align-items:center}
    .toggle{padding:8px 12px;border-radius:10px;border:1px solid rgba(10,12,20,0.04);background:rgba(255,255,255,0.6);cursor:pointer}

    footer{grid-column:1/-1;color:var(--muted);font-size:13px;margin-top:8px;text-align:center}

    @media (max-width:920px){ .container{grid-template-columns:1fr; padding:12px} .card{padding:14px} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="title">Kalkulator Patungan — Glass</div>
        <div class="subtitle">Elegan, Glassmorphism theme — pajak & service included</div>
      </div>
      <div style="margin-left:auto;font-size:13px;color:var(--muted)">Sumber: <img src="/mnt/data/WhatsApp Image 2025-11-20 at 10.31.12.jpeg" alt="screenshot" style="height:34px;border-radius:8px;vertical-align:middle;box-shadow:0 6px 18px rgba(13,17,23,0.06)"></div>
    </header>

    <section class="card calc">
      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div style="font-weight:700;color:#0f172a">Super Kalkulator</div>
        <div class="controls">
          <button id="modeToggle" class="toggle">Mode: Kalkulator</button>
        </div>
      </div>

      <div id="display" class="display">
        <div>
          <div id="expr" class="expr"></div>
          <div id="value">0</div>
        </div>
        <div style="text-align:right;color:var(--muted);font-size:12px">Keyboard friendly</div>
      </div>

      <div class="keys" role="group" aria-label="Buttons">
        <button class="k" data-action="clear">C</button>
        <button class="k" data-action="back">⌫</button>
        <button class="k" data-action="percent">%</button>
        <button class="k op" data-action="/">÷</button>

        <button class="k" data-number="7">7</button>
        <button class="k" data-number="8">8</button>
        <button class="k" data-number="9">9</button>
        <button class="k op" data-action="*">×</button>

        <button class="k" data-number="4">4</button>
        <button class="k" data-number="5">5</button>
        <button class="k" data-number="6">6</button>
        <button class="k op" data-action="-">−</button>

        <button class="k" data-number="1">1</button>
        <button class="k" data-number="2">2</button>
        <button class="k" data-number="3">3</button>
        <button class="k op" data-action="+">+</button>

        <button class="k wide" data-number="0">0</button>
        <button class="k" data-number=".">.</button>
        <button class="k equal" data-action="=">=</button>
      </div>

      <div style="color:var(--muted);font-size:13px;margin-top:6px">Tip: tekan C untuk reset, atau klik 'Mode' untuk beralih ke bagian Patungan.</div>
    </section>

    <aside class="card split" id="splitCard">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:700;color:#0f172a">Patungan / Split Bill</div>
        <div style="font-size:13px;color:var(--muted)">Realtime perhitungan</div>
      </div>

      <div class="field">
        <label>Total tagihan (sebelum pajak)</label>
        <input id="subtotal" type="number" min="0" step="0.01" value="0">
      </div>

      <div class="row">
        <div class="col field">
          <label>Pajak (%)</label>
          <input id="tax" type="number" min="0" step="0.1" value="10">
        </div>
        <div class="col field">
          <label>Biaya layanan (%)</label>
          <input id="service" type="number" min="0" step="0.1" value="5">
        </div>
      </div>

      <div class="field">
        <label>Jumlah orang</label>
        <input id="people" type="number" min="1" step="1" value="2">
      </div>

      <div class="result">
        <div style="display:flex;justify-content:space-between;gap:12px"><div>Subtotal</div><div id="r-sub">Rp0</div></div>
        <div style="display:flex;justify-content:space-between;gap:12px"><div>Pajak</div><div id="r-tax">Rp0</div></div>
        <div style="display:flex;justify-content:space-between;gap:12px"><div>Service</div><div id="r-service">Rp0</div></div>
        <hr style="border:none;border-top:1px dashed rgba(13,17,23,0.06);margin:8px 0">
        <div style="display:flex;justify-content:space-between;gap:12px"><div>Total</div><div id="r-total" class="big">Rp0</div></div>
        <div style="display:flex;justify-content:space-between;gap:12px;margin-top:8px"><div>Per orang</div><div id="r-per" class="big">Rp0</div></div>
      </div>

      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="copyShare" class="toggle">Salin hasil</button>
        <button id="resetSplit" class="toggle">Reset</button>
      </div>

      <details style="margin-top:8px;color:var(--muted)">
        <summary>Penjelasan singkat</summary>
        <div style="margin-top:8px;font-size:13px">Subtotal &times; (tax% + service%) ditambahkan ke subtotal. Total dibagi jumlah orang untuk mendapatkan per orang. Bulatkan sesuai kebutuhan (lihat kode untuk opsi).</div>
      </details>
    </aside>

    <footer>File ini adalah satu halaman HTML yang berisi kedua fitur (kalkulator + patungan). Simpan sebagai <code>index.html</code> dan buka di browser untuk mencoba.</footer>
  </div>

<script>
(function(){
  // --- Kalkulator biasa ---
  const display = document.getElementById('value');
  const expr = document.getElementById('expr');
  let current = '0', first = null, operator = null, waiting = false;

  function update(){ display.textContent = current; expr.textContent = (first !== null && operator) ? first + ' ' + operator : '' }
  update();

  function inputDigit(d){
    if(waiting){ current = d === '.' ? '0.' : d; waiting = false; }
    else{ if(current === '0' && d !== '.') current = d; else current = current + d; }
    update();
  }

  function inputDot(){ if(!current.includes('.')) current += '.'; update(); }
  function clearAll(){ current='0'; first=null; operator=null; waiting=false; update(); }
  function back(){ current = current.length>1 ? current.slice(0,-1) : '0'; update(); }
  function percent(){ current = String(parseFloat(current||0)/100); update(); }

  function compute(a,b,op){
    a=+a; b=+b; switch(op){case'+': return a+b;case'-': return a-b;case'*': return a*b;case'/': return b===0? 'Error' : a/b;}
    return b;
  }

  function handleOperator(nextOp){
    const inputValue = parseFloat(current);
    if(first === null){ first = inputValue; }
    else if(operator){
      const result = compute(first, inputValue, operator);
      first = result === 'Error' ? null : result;
      current = String(result);
    }
    operator = nextOp;
    waiting = true;
    update();
  }

  document.querySelector('.keys').addEventListener('click', (e)=>{
    const t = e.target;
    if(t.dataset.number !== undefined){ const v = t.dataset.number; if(v==='.') inputDot(); else inputDigit(v); return; }
    const action = t.dataset.action;
    if(!action) return;
    if(action==='clear') clearAll();
    else if(action==='back') back();
    else if(action==='percent') percent();
    else if(action==='='){ handleOperator(null); operator=null; waiting=false; first=null; }
    else handleOperator(action);
  });

  window.addEventListener('keydown',(ev)=>{
    const k = ev.key;
    if(/^[0-9]$/.test(k)) inputDigit(k);
    else if(k==='.') inputDot();
    else if(k==='Enter' || k==='='){ handleOperator(null); operator=null; waiting=false; first=null; }
    else if(['+','-','*','/'].includes(k)) handleOperator(k);
    else if(k==='Backspace') back();
    else if(k.toLowerCase()==='c') clearAll();
  });

  // --- Patungan / Split bill ---
  const subtotalEl = document.getElementById('subtotal');
  const taxEl = document.getElementById('tax');
  const serviceEl = document.getElementById('service');
  const peopleEl = document.getElementById('people');

  const rSub = document.getElementById('r-sub');
  const rTax = document.getElementById('r-tax');
  const rService = document.getElementById('r-service');
  const rTotal = document.getElementById('r-total');
  const rPer = document.getElementById('r-per');

  function fmt(n){ // format rupiah-like, but generic
    if(isNaN(n)) return 'Error';
    return new Intl.NumberFormat('id-ID', { style:'currency', currency:'IDR', maximumFractionDigits:0 }).format(Math.round(n));
  }

  function calcSplit(){
    const sub = parseFloat(subtotalEl.value) || 0;
    const tax = parseFloat(taxEl.value) || 0;
    const service = parseFloat(serviceEl.value) || 0;
    const people = Math.max(1, parseInt(peopleEl.value) || 1);

    const taxAmt = sub * (tax/100);
    const serviceAmt = sub * (service/100);
    const total = sub + taxAmt + serviceAmt;
    const per = total / people;

    rSub.textContent = fmt(sub);
    rTax.textContent = fmt(taxAmt);
    rService.textContent = fmt(serviceAmt);
    rTotal.textContent = fmt(total);
    rPer.textContent = fmt(per);
  }

  [subtotalEl,taxEl,serviceEl,peopleEl].forEach(i=>i.addEventListener('input',calcSplit));
  calcSplit();

  document.getElementById('resetSplit').addEventListener('click', ()=>{
    subtotalEl.value = 0; taxEl.value=10; serviceEl.value=5; peopleEl.value=2; calcSplit();
  });

  document.getElementById('copyShare').addEventListener('click', async ()=>{
    const txt = `Total: ${rTotal.textContent} — Per orang: ${rPer.textContent} (Pajak ${taxEl.value}%, Service ${serviceEl.value}%)`;
    try{ await navigator.clipboard.writeText(txt); alert('Hasil disalin ke clipboard'); }catch(e){ prompt('Salin manual:', txt); }
  });

  // Mode toggle: fokus between calculators
  const modeToggle = document.getElementById('modeToggle');
  const splitCard = document.getElementById('splitCard');
  let mode = 'kalkulator';
  modeToggle.addEventListener('click', ()=>{
    if(mode==='kalkulator'){ mode='patungan'; modeToggle.textContent='Mode: Patungan'; splitCard.scrollIntoView({behavior:'smooth'}); }
    else{ mode='kalkulator'; modeToggle.textContent='Mode: Kalkulator'; window.scrollTo({top:0,behavior:'smooth'}); }
  });

})();
</script>

<!--
  Versi Glassmorphism ini mengubah style agar lebih elegan:
  - Card memakai background semi-transparan + blur (backdrop-filter)
  - Tombol memakai radius besar, hover + shadow lembut
  - Display diperbesar, spacing ditingkatkan
  - Tetap mempertahankan logika kalkulator & split bill

  Simpan file ini sebagai index.html dan buka di browser. Gambar referensi diambil dari path lokal sesi: /mnt/data/WhatsApp Image 2025-11-20 at 10.31.12.jpeg
-->
</body>
</html>
